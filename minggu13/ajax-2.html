<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>belajar daasar ajax</title>
</head>
<body>
    <h1>Tutorial Ajax <button id="btn-clear" onclick="clearResult()">clear</button> </h1>
    <div id="hasil"></div>
    <button id="button" onclick="loadContent()">Load Content</button>
    <script>
        function loadContent(){
            var xhr = new XMLHttpRequest();
            var url = "http://localhost/ajak files/kode.json";

            xhr.onloadend=function(){
                document.getElementById("button").innerHTML="Loading...";
            }

            xhr.onerror=function(){
                alert("Gagal mengambil data");
            };
            xhr.onloadend=function(){
                if(thisresponseText !== ""){
                    var data =JSON.parse(this.responseText);
                    var img =document.createElement("img");
                    img.src =data.avatar_url;
                    var nama =document.createElement("h3");
                    nama.innerHTML =data.name;

                    document.getElementById("hasil").append(img, name);
                    document.getElementById("button").innerHTML="Done";

                    setTimeout(function(){
                        document.getElementById("button").innerHTML="load lagi";
                    },3000);
                }
            };
        
            xhr.open("GET", url, true);
            xhr.send();
            }
            function clearResult() {
            document.getElementById("hasil").innerHTML = "";
            }

    </script>
</body>
</html>